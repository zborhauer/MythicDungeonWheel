<Ui xmlns="http://www.blizzard.com/wow/ui/">
    
    <!-- Main Frame -->
    <Frame name="MythicDungeonWheelFrame" parent="UIParent" movable="true" enableMouse="true" clampedToScreen="true" hidden="true" inherits="BackdropTemplate">
        <Size x="500" y="500"/>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>
        
        <Scripts>
            <OnLoad>
                self:RegisterForDrag("LeftButton")
                -- Set backdrop using the new system
                self:SetBackdrop({
                    bgFile = "Interface\\DialogFrame\\UI-DialogBox-Background",
                    edgeFile = "Interface\\DialogFrame\\UI-DialogBox-Border",
                    tile = true,
                    tileSize = 32,
                    edgeSize = 32,
                    insets = { left = 11, right = 12, top = 12, bottom = 11 }
                })
                -- Initialize scroll child buttons table
                if MythicDungeonWheelFrameKeystoneListScrollChild then
                    MythicDungeonWheelFrameKeystoneListScrollChild.buttons = {}
                end
            </OnLoad>
            <OnDragStart>
                self:StartMoving()
            </OnDragStart>
            <OnDragStop>
                self:StopMovingOrSizing()
            </OnDragStop>
            <OnShow>
                if MythicDungeonWheel then
                    MythicDungeonWheel:UpdateInterface()
                end
            </OnShow>
        </Scripts>
        
        <!-- Frames -->
        <Frames>
            <!-- Title Text Frame -->
            <Frame name="MythicDungeonWheelFrameTitleFrame">
                <Size x="450" y="50"/>
                <Anchors>
                    <Anchor point="TOP" x="0" y="-15"/>
                </Anchors>
                <Scripts>
                    <OnLoad>
                        -- Create title text
                        self.titleText = self:CreateFontString("MythicDungeonWheelFrameTitle", "OVERLAY", "GameFontNormal")
                        self.titleText:SetPoint("TOP")
                        self.titleText:SetText("Mythic Dungeon Wheel")
                        
                        -- Create session owner text
                        self.ownerText = self:CreateFontString("MythicDungeonWheelFrameOwnerText", "OVERLAY", "GameFontNormalSmall")
                        self.ownerText:SetPoint("TOP", self.titleText, "BOTTOM", 0, -5)
                        self.ownerText:SetText("")
                        self.ownerText:SetTextColor(0.8, 0.8, 1.0) -- Light blue color
                        
                        -- Create status text
                        self.statusText = self:CreateFontString("MythicDungeonWheelFrameStatusText", "OVERLAY", "GameFontNormal")
                        self.statusText:SetPoint("TOP", self.ownerText, "BOTTOM", 0, -5)
                        self.statusText:SetText("No active session")
                        
                        -- Make texts globally accessible
                        _G["MythicDungeonWheelFrameOwnerText"] = self.ownerText
                        _G["MythicDungeonWheelFrameStatusText"] = self.statusText
                    </OnLoad>
                </Scripts>
            </Frame>
            <!-- Close Button -->
            <Button name="MythicDungeonWheelFrameCloseButton" inherits="UIPanelCloseButton">
                <Anchors>
                    <Anchor point="TOPRIGHT" x="-5" y="-5"/>
                </Anchors>
            </Button>
            
            <!-- Keystone List Frame -->
            <Frame name="MythicDungeonWheelFrameKeystoneList">
                <Size x="450" y="250"/>
                <Anchors>
                    <Anchor point="TOP" relativePoint="BOTTOM" relativeTo="MythicDungeonWheelFrameTitleFrame" x="0" y="-10"/>
                </Anchors>
                
                <Frames>
                    <Frame name="MythicDungeonWheelFrameKeystoneListScrollChild">
                        <Size x="450" y="250"/>
                        <Anchors>
                            <Anchor point="TOPLEFT"/>
                        </Anchors>
                    </Frame>
                </Frames>
            </Frame>
            
            <!-- Selection Status Label -->
            <Frame name="MythicDungeonWheelFrameSelectionLabel">
                <Size x="450" y="20"/>
                <Anchors>
                    <Anchor point="TOP" relativePoint="BOTTOM" relativeTo="MythicDungeonWheelFrameKeystoneList" x="0" y="-5"/>
                </Anchors>
                
                <Scripts>
                    <OnLoad>
                        -- Create status label text
                        self.text = self:CreateFontString("MythicDungeonWheelFrameSelectionLabelText", "OVERLAY", "GameFontNormalLarge")
                        self.text:SetPoint("CENTER", self, "CENTER", 0, 0)
                        self.text:SetText("")
                        self.text:SetTextColor(1, 1, 1) -- White text
                        -- Make it globally accessible
                        _G["MythicDungeonWheelFrameSelectionLabelText"] = self.text
                    </OnLoad>
                </Scripts>
            </Frame>
            
            <!-- Selected Keystone Frame -->
            <Frame name="MythicDungeonWheelFrameSelectedKeystone" hidden="true" inherits="BackdropTemplate">
                <Size x="450" y="40"/>
                <Anchors>
                    <Anchor point="TOP" relativePoint="BOTTOM" relativeTo="MythicDungeonWheelFrameSelectionLabel" x="0" y="-5"/>
                </Anchors>
                
                <Scripts>
                    <OnLoad>
                        -- Set backdrop using the new system
                        self:SetBackdrop({
                            bgFile = "Interface\\Tooltips\\UI-Tooltip-Background",
                            edgeFile = "Interface\\Tooltips\\UI-Tooltip-Border",
                            tile = true,
                            tileSize = 16,
                            edgeSize = 16,
                            insets = { left = 2, right = 2, top = 2, bottom = 2 }
                        })
                        self:SetBackdropColor(0, 0.5, 0, 0.8)
                        
                        -- Create text programmatically
                        self.text = self:CreateFontString("MythicDungeonWheelFrameSelectedKeystoneText", "OVERLAY", "GameFontNormalLarge")
                        self.text:SetPoint("CENTER")
                        self.text:SetText("Selected Keystone")
                        
                        -- Make text globally accessible
                        _G["MythicDungeonWheelFrameSelectedKeystoneText"] = self.text
                    </OnLoad>
                </Scripts>
            </Frame>
            
            <!-- Buttons -->
            <Button name="MythicDungeonWheelFrameStartButton" inherits="UIPanelButtonTemplate" text="Start Session" hidden="true">
                <Size x="100" y="25"/>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" x="20" y="20"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        if MythicDungeonWheel then
                            MythicDungeonWheel:StartSession()
                        end
                    </OnClick>
                </Scripts>
            </Button>
            
            <Button name="MythicDungeonWheelFrameSelectButton" inherits="UIPanelButtonTemplate" text="Get Rolling!" hidden="true">
                <Size x="120" y="25"/>
                <Anchors>
                    <Anchor point="BOTTOM" x="-10" y="20"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        if MythicDungeonWheel then
                            MythicDungeonWheel:SelectRandomKeystone()
                        end
                    </OnClick>
                </Scripts>
            </Button>
            
            <Button name="MythicDungeonWheelFrameResetButton" inherits="UIPanelButtonTemplate" text="Reset" hidden="true">
                <Size x="80" y="25"/>
                <Anchors>
                    <Anchor point="BOTTOMRIGHT" x="-20" y="20"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        if MythicDungeonWheel then
                            MythicDungeonWheel:ResetSession()
                        end
                    </OnClick>
                </Scripts>
            </Button>
            
            <!-- Test Mode Button -->
            <Button name="MythicDungeonWheelFrameTestButton" inherits="UIPanelButtonTemplate" text="Toggle Test" hidden="true">
                <Size x="80" y="20"/>
                <Anchors>
                    <Anchor point="BOTTOMLEFT" x="20" y="50"/>
                </Anchors>
                <Scripts>
                    <OnClick>
                        if MythicDungeonWheel then
                            MythicDungeonWheel:ToggleTestMode()
                        end
                    </OnClick>
                </Scripts>
            </Button>
        </Frames>
    </Frame>
    
</Ui>
